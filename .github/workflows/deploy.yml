name: Deploy to VPS

on:
push:
branches:
- main

jobs:
deploy:
runs-on: ubuntu-latest
steps:
- name: Checkout repository
uses: actions/checkout@v3
  - name: Setup SSH key
    uses: webfactory/ssh-agent@v0.9.1
    with:
      ssh-private-key: ${{ secrets.DEPLOY_KEY }}

  - name: Deploy via rsync
    run: |
      rsync -avz --delete ./ ubuntu@51.178.136.139:/var/www/html/
      echo "Deployment finished."

